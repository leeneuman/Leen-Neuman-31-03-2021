(this["webpackJsonpherolo-weather"]=this["webpackJsonpherolo-weather"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(19),i=n.n(r),s=(n(42),n(43),n(12)),o=n(4),u=function(e){return{type:"UPDATE_CITY",payload:{city:e}}},l=n(1);var d=function(){var e=Object(o.b)(),t=function(t){e({type:"UPDATE_UNITS",payload:{units:t}})};return Object(l.jsxs)("div",{class:"dropdown",children:[Object(l.jsx)("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Units"}),Object(l.jsxs)("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[Object(l.jsx)("button",{class:"dropdown-item",type:"button",onClick:function(){return t("Metric")},children:"Metric"}),Object(l.jsx)("button",{class:"dropdown-item",type:"button",onClick:function(){return t("Imperial")},children:"Imperial"})]})]})};var j=function(){return Object(l.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(l.jsx)(s.b,{className:"navbar-brand",to:"/",children:"Herolo Weather"}),Object(l.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(l.jsx)("span",{className:"navbar-toggler-icon"})}),Object(l.jsxs)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav",children:[Object(l.jsx)(s.c,{exact:!0,to:"/",className:"nav-link text-white",activeStyle:{fontWeight:"bold"},children:"Home"}),Object(l.jsx)(s.c,{exact:!0,to:"/favorites",className:"nav-link text-white",activeStyle:{fontWeight:"bold"},children:"Favorites"}),Object(l.jsx)(d,{})]})]})},f=n(3),b=n(5),p=n.n(b),h=n(10),x=n(13),O=n(22),v=n.n(O),m="https://dataservice.accuweather.com",y="3QtNaCFlNvFPE2vCYQ8nMh5C04bTGrjC",g=function(e){return v.a.get("".concat(m,"/locations/v1/cities/autocomplete?apikey=").concat(y,"&q=").concat(e),{headers:{Accept:"application/json"}})},w=function(e){return v.a.get("".concat(m,"/currentconditions/v1/").concat(e,"?apikey=").concat(y),{headers:{Accept:"application/json"}})},N=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v.a.get("".concat(m,"/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat(y,"&metric=").concat(t),{headers:{Accept:"application/json"}})};var E=function(){var e=Object(o.b)(),t=Object(c.useState)(""),n=Object(x.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),s=Object(x.a)(i,2),d=s[0],j=s[1],f=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){a.length>0&&/^[A-Za-z -]*$/.test(a)&&f().then((function(e){return j(e.data)})).catch((function(e){return console.log(e)}))}),[a]),Object(l.jsxs)("div",{className:"w-50 position-relative",children:[Object(l.jsx)("input",{className:"SearchBar-input w-100 mt-5",type:"text",value:a,onChange:function(e){r(e.target.value)},placeholder:"Search for a city name...",title:"English characters only."}),a.length>0&&d.length>0&&Object(l.jsx)("div",{className:"position-absolute w-100 bg-white border",style:{zIndex:"1"},children:(d||[]).map((function(t){return Object(l.jsx)("div",{className:"p-1",style:{cursor:"pointer"},onClick:function(){return function(t){e(u(t)),j([]),r("")}(t)},children:"".concat(t.LocalizedName,", ").concat(t.Country.LocalizedName)},t.Key)}))})]})},T=n(16),k=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},S=function(e){return JSON.parse(window.localStorage.getItem(e))||[]};var C=function(e){var t=e.type,n=e.data,c=Object(o.c)((function(e){return e.units}));if(!t||0===n.length)return null;switch(t){case"current":return"Metric"===c?Object(l.jsxs)("span",{children:[n.Temperature.Metric.Value," \u2103"]}):Object(l.jsxs)("span",{children:[n.Temperature.Imperial.Value," \u2109"]});case"forcast-lo":return"Metric"===c?Object(l.jsxs)("span",{children:[n.Temperature.Minimum.Value," \u2103"]}):Object(l.jsxs)("span",{children:[n.Temperature.Minimum.Value," \u2109"]});case"forcast-hi":return"Metric"===c?Object(l.jsxs)("span",{children:[n.Temperature.Maximum.Value," \u2103"]}):Object(l.jsxs)("span",{children:[n.Temperature.Maximum.Value," \u2109"]});default:return null}};var _=function(e){var t=e.city,n=Object(o.b)(),a=Object(o.c)((function(e){return e.favorites})),r=Object(c.useState)([]),i=Object(x.a)(r,2),s=i[0],u=i[1],d=t.Key,j=function(e,t){return t&&t.filter((function(t){return t.Key===e})).length>0}(d,a),f=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){d&&f().then((function(e){return u(e.data[0])})).catch((function(e){return alert(e)}))}),[d]),d&&0!==s.length?Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center p-4 w-100",children:[Object(l.jsxs)("div",{className:"d-flex flex-row justify-content-between w-100",children:[Object(l.jsxs)("div",{className:"d-flex flex-column",children:[Object(l.jsx)("h5",{children:"".concat(t.LocalizedName,", ").concat(t.Country.LocalizedName)}),Object(l.jsx)(C,{type:"current",data:s})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"btn btn-light",onClick:j?function(){n({type:"REMOVE_FAVORITE",payload:{key:d}}),k("favorites",Object(T.a)(a.filter((function(e){return e.Key!==d}))))}:function(){n(function(e){return{type:"ADD_FAVORITE",payload:{city:e}}}(t)),k("favorites",[].concat(Object(T.a)(a),[t]))},children:j?"Remove from favorites":"Add to favorites"}),j?Object(l.jsx)("i",{className:"fas fa-heart fa-lg p-2"}):Object(l.jsx)("i",{className:"far fa-heart fa-lg p-2"})]})]}),Object(l.jsx)("h3",{children:s.WeatherText})]}):null},M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var D=function(e){var t=e.day,n=new Date(t.Date);return Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center card p-4 mt-2",style:{minWidth:"150px"},children:[Object(l.jsx)("h5",{children:M[n.getDay()]}),Object(l.jsxs)("div",{children:["Lo: ",Object(l.jsx)(C,{type:"forcast-lo",data:t})]}),Object(l.jsxs)("div",{children:["Hi: ",Object(l.jsx)(C,{type:"forcast-hi",data:t})]})]})};var I=function(e){var t=e.cityKey,n=Object(o.c)((function(e){return e.units})),a=Object(c.useState)([]),r=Object(x.a)(a,2),i=r[0],s=r[1],u=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,"Metric"===n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){t&&u().then((function(e){return s(e.data)})).catch((function(e){return alert(e)}))}),[t,n]),t&&0!==i.length?Object(l.jsx)("div",{className:"ForcastsContainer d-flex flex-row justify-content-between flex-wrap p-4 w-100",children:i.DailyForecasts.map((function(e){return Object(l.jsx)(D,{day:e},e.EpochDate)}))}):null};var F=function(e){var t=e.match,n=Object(o.b)(),a=Object(o.c)((function(e){return e.selectedCity})),r=a.Key,i=t.params.name,s=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("tel aviv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){e().then((function(e){return n(u(e.data[0]))})).catch((function(e){return alert(e)}))};return Object(c.useEffect)((function(){r||j(s)}),[r]),Object(c.useEffect)((function(){i&&j(d)}),[i]),0!==a.length||r?Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center p-4 mt-5 w-100 card",style:{background:"rgba(100, 100, 100, 0.1)"},children:[Object(l.jsx)(_,{city:a}),Object(l.jsx)(I,{cityKey:r})]}):null};var A=function(e){var t=e.match;return Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(l.jsx)(E,{}),Object(l.jsx)(F,{match:t})]})};var V=function(e){var t=e.city,n=t.Key,a=Object(c.useState)([]),r=Object(x.a)(a,2),i=r[0],o=r[1],u=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u().then((function(e){return o(e.data[0])})).catch((function(e){return alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){n&&d()}),[n]),n&&0!==i.length?Object(l.jsxs)(s.b,{className:"d-flex flex-column align-items-center card p-4 mt-4 mr-4 justify-content-between text-decoration-none text-reset text-center",style:{height:"200px",width:"200px"},to:"/city/".concat(t.LocalizedName),children:[Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(l.jsx)("h5",{children:t.LocalizedName}),Object(l.jsx)(C,{type:"current",data:i})]}),Object(l.jsx)("h4",{children:i.WeatherText})]}):null};var L=function(){var e=Object(o.c)((function(e){return e.favorites}));return 0===e.length?Object(l.jsx)("h2",{className:"text-center mt-5 text-white",children:"No favorites yet..."}):Object(l.jsx)("div",{className:"FavoritesContainer d-flex flex-row flex-wrap p-4 w-100",children:e.map((function(e){return Object(l.jsx)(V,{city:e},e.Key)}))})};var K=function(){return Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(f.d,{children:[Object(l.jsx)(f.b,{exact:!0,path:"/",component:A}),Object(l.jsx)(f.b,{exact:!0,path:"/city/:name",component:A}),Object(l.jsx)(f.b,{exact:!0,path:"/favorites",component:L}),Object(l.jsx)(f.a,{to:"/"})]})})};var R=function(){return Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsx)(K,{})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},z=(n(69),n(72),n(15)),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S("favorites"),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return[].concat(Object(T.a)(e),[t.payload.city]);case"REMOVE_FAVORITE":return Object(T.a)(e.filter((function(e){return e.Key!==t.payload.key})));default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CITY":return t.payload.city;default:return e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Metric",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_UNITS":return t.payload.units;default:return e}},X=Object(z.b)({favorites:P,selectedCity:W,units:J}),B=Object(z.c)(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(l.jsx)(s.a,{children:Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(o.a,{store:B,children:Object(l.jsx)(R,{})})})}),document.getElementById("root")),U()}},[[73,1,2]]]);
//# sourceMappingURL=main.7edba541.chunk.js.map